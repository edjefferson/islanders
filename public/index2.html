<!DOCTYPE html>
<html>
  <head>
    <title>Islanders</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<style>.sea1 {
background-color:#6796f9;
}

.sea2 {
background-color:#88abf6;
}

.beach1 {
background-color:#f2f294;
}

.beach2 {
background-color:#f4f4ba;
}

.container-fluid {
background-color:#f6f6da;


}
h1 {


  padding-left: 10px;
  a {

    color: white;

  }
}



p {


  padding-left: 10px;
}
</style>

<script>

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
var decade = getUrlParameter('decade');
$.getJSON( "index.json?decade="+decade, function( json ) {
  for (var key in json.openstruct) {
    console.log(key);
    data = json.openstruct[key];


    for(var i = 0, l = data.length; i < l; ++i) {

      console.log(data[i].name);
      $('#'+key).append('<tr><td>'+data[i].name+'</td><td>'+data[i].appearances+'</td></tr>');
    }
  }
}
);

</script>
  <body>

    <div class="container-fluid">


      <div class="row sea1">  <h1>Islanders</h1>
</div>
<div class="row sea2">
  <p>Over <%=  number_with_delimiter(@castaways_count) %> castaways have been marooned on the BBC's desert island since <%= @start_date %>. But what records have they picked?</p>
  <p>Between them, they've picked <%=  number_with_delimiter(@records_count) %> discs by <%=  number_with_delimiter(@artists_count) %> artists.</p>
</div>

<div class="row beach1">
  <% @decades.each do |decade| %>
    <div class="col">
      <%= link_to decade, "?decade=#{decade}" %>
    </div>
  <% end %>
</div>

<div class="row beach2">
  <h2> <%= @current_decade %></h2>
</div>

<div class="row beach2">
  <div class="col">
    <h3>Top 10 Artists</h3>
  </div>
  <div class="col">
    <h3>Top 10 Discs</h3>
  </div>
</div>



<div class="row">
  <div class="col">
    <table id = "artists" class = "table table-striped table-sm">


    </table>
  </div>

  <div class="col">
    <table id="tracks" class = "table table-striped table-sm">

    </table>
  </div>
</div>

  <div class="row beach2">
    <div class="col">
      <h3>Top Books</h3>
    </div>
    <div class="col">
      <h3>Top Luxuries</h3>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <table id="books" class = "table table-striped table-sm">

      </table>
    </div>

    <div class="col">
      <table id="luxuries" class = "table table-striped table-sm">

      </table>
    </div>
  </div>


    <div class="row"><p>Islanders is an <a href="http://www.twitter.com/edjeff">@edjeff</a> thing.</p></div>
  </body>
</html>
